(this["webpackJsonpsnapshot-app"]=this["webpackJsonpsnapshot-app"]||[]).push([[0],{124:function(e,t,n){e.exports={center:"style_center__2Fmj7",Container:"style_Container__3JH4M","vertical-center":"style_vertical-center__EMtR2",Labels:"style_Labels__1cOp3",Label:"style_Label__5u9LU"}},133:function(e,t,n){e.exports={center:"style_center__33eGl",Container:"style_Container__2VNXm","vertical-center":"style_vertical-center__13jdx"}},189:function(e,t,n){},278:function(e,t,n){},280:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),s=n.n(c),o=(n(189),n(27)),i=n(294),u=n(12),l={HOME:"/",LOGIN:"/login",SIGNUP:"/signup",LOGOUT:"/logout"},j=[{name:"Venkat",email:"venkat@email.com",password:"12345678"},{name:"Akash",email:"akash@email.com",password:"12345678"},{name:"Raushan",email:"raushan@email.com",password:"12345678"},{name:"Mohit",email:"mohit@email.com",password:"12345678"}],d=n(10),b=n(75),O=n(18),m=n(2),p=["component"],h=function(e){var t=e.component,n=Object(b.a)(e,p),a=Object(O.c)((function(e){return e.auth})).loggedIn;return Object(m.jsx)(u.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return a?Object(m.jsx)(t,Object(d.a)({},e)):Object(m.jsx)(u.a,{to:l.LOGIN})}}))},f=["component","restricted"],g=function(e){var t=e.component,n=e.restricted,a=Object(b.a)(e,f),r=Object(O.c)((function(e){return e.auth})).loggedIn;return Object(m.jsx)(u.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return r&&n?Object(m.jsx)(u.a,{to:l.HOME}):Object(m.jsx)(t,Object(d.a)({},e))}}))},x=n(162),v=n(163),_=n(172),y=n(171),w=r.a.createContext(),I=n(164),S=Object(I.a)(),N=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={username:null},a}return Object(v.a)(n,[{key:"render",value:function(){return Object(m.jsx)(w.Provider,{value:{username:this.state.username},children:this.props.children})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null!==e.user?{username:e.user.name}:t}}]),n}(r.a.Component),F=n(165),C=n.n(F),L=(n(257),n(297)),E=n(170),k=function(e){var t=e.farm,n=e.server,a=e.id,r=e.secret;return"https://farm".concat(t,".staticflickr.com/").concat(n,"/").concat(a,"_").concat(r,"_m.jpg")},P=function(e){var t=e.data;r.a.useEffect((function(){}),[t]);var n=t.map((function(e,t){return Object(m.jsx)(L.a.Column,{children:Object(m.jsx)(E.a,{src:k(e),alt:"",size:"large"})},t)}));return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{children:t.length?Object(m.jsx)("div",{children:Object(m.jsx)(C.a,{children:n})}):Object(m.jsx)("h2",{style:{marginTop:"10%"},children:"No Image Found :("})})})},A=n(132),G=n.n(A),U=n(167),q=n(36),B=n(293),M=n(92),z=n(124),D=n.n(z),J=n(118),H="LOGIN_SUCCESS",T="LOGIN_FAILD",Z="SEARCH_SUCCESS",R="SEARCH_FAILD",X=function(e){var t=e.email,n=e.password,a=Object(J.a)(j);return function(e){try{a=JSON.parse(localStorage.getItem("users")).concat(a)}catch(s){localStorage.setItem("users","[]")}finally{var r=a.find((function(e){return e.email===t}));if(r){if(r.password===n){var c={name:r.name,email:r.email};return e(function(e){return{type:H,payload:e}}(c)),sessionStorage.setItem("user",JSON.stringify(c)),{status:200,message:"Login Success!"}}return{status:401,message:"Wrong Password!"}}return{status:404,message:"User not found!"}}}},V=function(){return function(e){return sessionStorage.removeItem("user"),e({type:T})}},$=function(e){var t=Object(J.a)(j);return function(n){try{t=JSON.parse(localStorage.getItem("users")).concat(t)}catch(c){localStorage.setItem("users","[]")}finally{var a=t.findIndex((function(t){return t.email===e.email}));if(console.log(a),a<0){var r=JSON.parse(localStorage.getItem("users")).concat([e]);return localStorage.setItem("users",JSON.stringify(r)),{status:201,message:"Signup Success!"}}return{status:403,message:"User already exist!\n  Please login".split("\n")}}}},W=n(168),Y=n.n(W),K=function(e){return function(t){return Y.a.get("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=636e1481b4f3c446d26b8eb6ebfe7127"+function(e){return"&tags=".concat(e,"&per_page=24&format=json&nojsoncallback=1")}(e)).then((function(e){var n,a=e.data;return t((n=a.photos.photo,{type:Z,payload:n}))})).catch((function(e){return console.log("Search query error: "+e)}))}},Q=["Sunset","Mountain","Bike","Cat","Bird"],ee=function(){var e=r.a.useState({loading:!1,value:""}),t=Object(q.a)(e,2),n=t[0],a=t[1],c=Object(O.b)(),s=function(){var e=Object(U.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.target.value&&null!==t.target.value){e.next=2;break}return e.abrupt("return",c({type:R}));case 2:return a({value:t.target.value,loading:!0}),e.next=5,c(K(t.target.value));case 5:a(Object(d.a)(Object(d.a)({},n),{},{loading:!1}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:D.a.Container,children:[Object(m.jsx)(B.a,{id:"search",fluid:!0,loading:n.loading,icon:"search",placeholder:"Search...",onChange:function(e){return s(e)}}),Object(m.jsx)("div",{className:D.a.Labels,children:Q.map((function(e){return Object(m.jsx)(M.a,{size:"large",as:"a",className:D.a.Label,onClick:function(t){return function(e,t){e.preventDefault(),document.getElementById("search").focus(),document.getElementById("search").value=t,a(Object(d.a)(Object(d.a)({},n),{},{value:t})),c(K(t))}(t,e)},children:e},e)}))})]})})},te=n(133),ne=n.n(te),ae=function(){var e=Object(O.c)((function(e){return e.photos}));return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:ne.a.Container,"data-testid":"home",children:[Object(m.jsx)("div",{style:{width:"100%",textAlign:"right !important"},children:Object(m.jsx)(o.b,{"data-testid":"logout-btn",size:"small",to:l.LOGOUT,children:"LOGOUT"})}),Object(m.jsx)(w.Consumer,{children:function(e){return Object(m.jsxs)("h1",{className:ne.a.Heading,children:["Welcome ",e.username," to Snap-Shot!"]})}}),Object(m.jsx)(ee,{}),Object(m.jsx)(P,{data:e})]})})},re=n(50),ce=n(295),se=n(299),oe=n(296),ie=n(63),ue=n(281),le=n(84),je=n.n(le),de=n(83),be=n(169),Oe=function(){try{var e=sessionStorage.getItem("user");return null===e?{loggedIn:!1,user:null}:{loggedIn:!0,user:JSON.parse(e)}}catch(t){return{loggedIn:!1,user:null}}}(),me=Object(de.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(d.a)(Object(d.a)({},e),{},{user:t.payload,loggedIn:!0});case T:return{user:null,loggedIn:!1};default:return e}},photos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:var n=t.payload;return n;case R:return n=[];default:return e}}}),pe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||de.c,he=Object(de.d)(me,pe(Object(de.a)(be.a))),fe=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ge=/^[a-zA-Z0-9]{6,}$/,xe=/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/,ve=function(e){var t=e.name,n=e.value;switch(t){case"email":return n&&!n.match(fe)?"Please enter valid email address!":n?"":"Email required!";case"name":return n&&!n.match(xe)?"Please enter valid name!":n?"":"Name required!";case"password":return n&&!n.match(ge)?"Password must be atleast length of 6":n?"":"Password required!";default:return""}},_e=function(e){return function(t){return Object.values(e).includes("")||Object.values(t).findIndex((function(e){return""!==e}))>=0}},ye=function(){var e=r.a.useState({email:"",password:""}),t=Object(q.a)(e,2),n=t[0],a=t[1],c=r.a.useState({email:"",password:""}),s=Object(q.a)(c,2),i=s[0],u=s[1],j=r.a.useState(""),b=Object(q.a)(j,2),p=b[0],h=b[1],f=Object(O.b)(),g=function(e){a(Object(d.a)(Object(d.a)({},n),{},Object(re.a)({},e.target.name,e.target.value))),u(Object(d.a)(Object(d.a)({},i),{},Object(re.a)({},e.target.name,ve(e.target))))},x=r.a.useMemo((function(){return console.log("Memo call"),_e(n)(i)}),[n,i]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:je.a.Container,"data-testid":"login",children:Object(m.jsxs)(ce.a,{className:je.a.Form,"data-testid":"login-form",error:""!==p,children:[Object(m.jsx)(se.a,{as:"h2",children:"Login"}),Object(m.jsx)("br",{}),p&&Object(m.jsx)(oe.a,{error:!0,header:"Action Forbidden",content:p}),Object(m.jsx)(ce.a.Field,{className:je.a.InputField,children:Object(m.jsxs)(ce.a.Input,{iconPosition:"left",placeholder:"Email",type:"email",name:"email",required:!0,error:""!==i.email&&{content:i.email,pointing:"below"},children:[Object(m.jsx)(ie.a,{name:"at"}),Object(m.jsx)("input",{required:!0,onBlur:function(e){return g(e)},onChange:function(e){return g(e)}})]})}),Object(m.jsx)(ce.a.Field,{className:je.a.InputField,children:Object(m.jsxs)(ce.a.Input,{iconPosition:"left",placeholder:"Password",required:!0,type:"password",name:"password",onBlur:function(e){return g(e)},onChange:function(e){return g(e)},error:""!==i.password&&{content:i.password,pointing:"below"},children:[Object(m.jsx)(ie.a,{name:"key"}),Object(m.jsx)("input",{})]})}),Object(m.jsx)(ce.a.Field,{className:je.a.Button,children:Object(m.jsx)(ue.a,{type:"submit",disabled:x,positive:!0,onClick:function(e){return function(e){e.preventDefault();var t=f(X(n));200===t.status?S.push(l.HOME):h(t.message)}(e)},children:"LOGIN"})}),Object(m.jsxs)("label",{children:["Don't have an account?",Object(m.jsx)(o.b,{to:l.SIGNUP,children:"Signup"})]})]})})})},we=n(54),Ie=n.n(we),Se=["conf_password"],Ne={email:"",name:"",password:"",conf_password:""},Fe={email:"",name:"",password:"",conf_password:""},Ce=function(){var e=r.a.useState(Ne),t=Object(q.a)(e,2),n=t[0],a=t[1],c=r.a.useState(Fe),s=Object(q.a)(c,2),i=s[0],u=s[1],j=r.a.useState({}),p=Object(q.a)(j,2),h=p[0],f=p[1],g=Object(O.b)(),x=function(e){a(Object(d.a)(Object(d.a)({},n),{},Object(re.a)({},e.target.name,e.target.value))),"conf_password"===e.target.name?u(Object(d.a)(Object(d.a)({},i),{},{conf_password:n.password!==e.target.value?"Password not matched":""})):u(Object(d.a)(Object(d.a)({},i),{},Object(re.a)({},e.target.name,ve(e.target))))};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:Ie.a.Container,"data-testid":"signup",children:Object(m.jsxs)(ce.a,{className:Ie.a.Form,success:h&&201===h.status,error:h&&201!==h.status,children:[Object(m.jsx)(se.a,{as:"h2",children:"Singup"}),Object(m.jsx)("br",{}),h.message&&Object(m.jsx)(oe.a,{success:h&&201===h.status,error:h&&201!==h.status,header:201!==h.status?"Action Forbidden":"Success",content:h.message}),Object(m.jsx)(ce.a.Field,{className:Ie.a.InputField,children:Object(m.jsxs)(ce.a.Input,{iconPosition:"left",placeholder:"Email",type:"email",name:"email",required:!0,error:""!==i.email&&{content:i.email,pointing:"below"},children:[Object(m.jsx)(ie.a,{name:"at"}),Object(m.jsx)("input",{required:!0,onBlur:function(e){return x(e)},onChange:function(e){return x(e)}})]})}),Object(m.jsx)(ce.a.Field,{className:Ie.a.InputField,children:Object(m.jsxs)(ce.a.Input,{iconPosition:"left",placeholder:"Name",type:"name",name:"name",required:!0,error:""!==i.name&&{content:i.name,pointing:"below"},children:[Object(m.jsx)(ie.a,{name:"user"}),Object(m.jsx)("input",{required:!0,onBlur:function(e){return x(e)},onChange:function(e){return x(e)}})]})}),Object(m.jsx)(ce.a.Field,{className:Ie.a.InputField,children:Object(m.jsxs)(ce.a.Input,{iconPosition:"left",placeholder:"Password",required:!0,type:"password",name:"password",onBlur:function(e){return x(e)},onChange:function(e){return x(e)},error:""!==i.password&&{content:i.password,pointing:"below"},children:[Object(m.jsx)(ie.a,{name:"key"}),Object(m.jsx)("input",{})]})}),Object(m.jsx)(ce.a.Field,{className:Ie.a.InputField,children:Object(m.jsxs)(ce.a.Input,{iconPosition:"left",placeholder:"Confirm Password",required:!0,type:"password",name:"conf_password",onBlur:function(e){return x(e)},onChange:function(e){return x(e)},error:""!==i.conf_password&&{content:i.conf_password,pointing:"below"},children:[Object(m.jsx)(ie.a,{name:"key"}),Object(m.jsx)("input",{})]})}),Object(m.jsx)(ce.a.Field,{className:Ie.a.Button,children:Object(m.jsx)(ue.a,{type:"submit",disabled:_e(n)(i),positive:!0,onClick:function(e){return function(e){e.preventDefault(),n.conf_password;var t=Object(b.a)(n,Se);f(g($(t)))}(e)},children:"SIGNUP"})}),Object(m.jsxs)("label",{children:["Already have an account?",Object(m.jsx)(o.b,{to:l.LOGIN,children:"Login"})]})]})})})},Le=function(){var e=Object(O.b)(),t=function(){return e(V()),Object(m.jsx)(u.a,{to:l.LOGIN})};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Loading..."}),Object(m.jsx)(t,{})]})},Ee=function(){return Object(m.jsxs)(u.d,{children:[Object(m.jsx)(h,{exact:!0,path:l.HOME,component:ae}),Object(m.jsx)(g,{path:l.LOGIN,component:ye,restricted:!0}),Object(m.jsx)(g,{path:l.SIGNUP,component:Ce,restricted:!0}),Object(m.jsx)(g,{path:l.LOGOUT,component:Le})]})};n(278);var ke=function(){var e=Object(O.c)((function(e){return e.auth.user}));return Object(m.jsx)("div",{className:"App","data-testid":"app",children:Object(m.jsx)(i.a,{children:Object(m.jsx)(N,{user:e,children:Object(m.jsx)(o.a,{children:Object(m.jsx)(Ee,{})})})})})};n(279);s.a.render(Object(m.jsx)(O.a,{store:he,children:Object(m.jsx)(ke,{})}),document.getElementById("root"))},54:function(e,t,n){e.exports={center:"style_center__2YhaZ",Container:"style_Container__30FEi","vertical-center":"style_vertical-center__26nUi",Form:"style_Form__1LgNr",InputField:"style_InputField__2A6kK"}},84:function(e,t,n){e.exports={center:"style_center__1d8E2",Container:"style_Container__MrRAz","vertical-center":"style_vertical-center__3Yy0X",Form:"style_Form__3t-5G",InputField:"style_InputField__AxpEd"}}},[[280,1,2]]]);
//# sourceMappingURL=main.6647b97e.chunk.js.map